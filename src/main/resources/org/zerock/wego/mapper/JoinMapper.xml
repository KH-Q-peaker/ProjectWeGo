<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  

  <mapper namespace = "org.zerock.wego.mapper.JoinMapper">


    <!-- ************ 참여 여부 확인  ************ -->
    <select 
    	id="selectById" 
    	resultType="Integer">
    	
    	SELECT 1
    	FROM dual
    	WHERE EXISTS(
    			SELECT 1 
    			FROM join_tb
    			WHERE san_party_id = #{partyId}
    			AND user_id = #{userId})
    </select>
    
    
	<!-- ************ 참여 신청 ************ -->
    <insert 
    	id="insert">
    	
    	INSERT INTO join_tb
    		(san_party_id, user_id)
    	VALUES
    		(#{partyId}, #{userId})
    </insert>
    
    
    <!-- ************ 참여 취소 ************ -->
    <delete 
    	id="deleteById">
    	DELETE
    	FROM
    		join_tb
    		
    	<where>
    		san_party_id = #{partyId}
    		
    		<if test = "#{userId} != null" >
    		AND
    		user_id = #{userId}
    		</if>
    	</where>
    </delete>
    
  </mapper>
  
  
  
  
  
  												